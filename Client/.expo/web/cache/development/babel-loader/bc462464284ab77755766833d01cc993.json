{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"C:\\\\Juany\\\\Escritorio Jun 2020\\\\Programacion\\\\React Native\\\\Genius\\\\Client\\\\screens\\\\DeckDetails.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState, useEffect } from 'react';\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport Modal from \"react-native-web/dist/exports/Modal\";\nimport TouchableWithoutFeedback from \"react-native-web/dist/exports/TouchableWithoutFeedback\";\nimport Keyboard from \"react-native-web/dist/exports/Keyboard\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport Animated from \"react-native-web/dist/exports/Animated\";\nimport { MaterialIcons } from '@expo/vector-icons';\nimport { NavigationEvents } from 'react-navigation';\nimport { globalStyles } from \"../styles/globalStyles\";\nimport Card from \"../shared/card\";\nimport { fetchData } from \"../apiClient\";\nimport FontAwesome from \"@expo/vector-icons/FontAwesome\";\nexport default function DeckDetails(_ref) {\n  var navigation = _ref.navigation;\n  var addCard = navigation.getParam('addCard');\n  var editCard = navigation.getParam('editCard');\n  var deleteCard = navigation.getParam('deleteCard');\n  var setNextReview = navigation.getParam('setNextReview');\n  var deck = navigation.getParam('item');\n\n  var _useState = useState(deck.cards.length),\n      _useState2 = _slicedToArray(_useState, 2),\n      deckLength = _useState2[0],\n      setDeckLength = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      shared = _useState4[0],\n      setShared = _useState4[1];\n\n  var _useState5 = useState(false),\n      _useState6 = _slicedToArray(_useState5, 2),\n      fadeMessage = _useState6[0],\n      setFadeMessage = _useState6[1];\n\n  var fadeValue = new Animated.Value(1);\n\n  function shareDeck(deck) {\n    if (!fadeMessage) {\n      fetchData('decks', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(deck)\n      });\n      setFadeMessage(false);\n      setFadeMessage(true);\n    }\n  }\n\n  var showMessage = function showMessage() {\n    Animated.timing(fadeValue, {\n      toValue: 0,\n      duration: 3000\n    }).start();\n  };\n\n  return React.createElement(View, {\n    style: globalStyles.container,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 5\n    }\n  }, React.createElement(NavigationEvents, {\n    onDidFocus: function onDidFocus() {\n      return setDeckLength(deck.cards.length);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 7\n    }\n  }), React.createElement(Text, {\n    style: _objectSpread(_objectSpread({}, globalStyles.titleText), {}, {\n      textAlign: \"center\"\n    }),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 7\n    }\n  }, deck.title), React.createElement(Card, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 7\n    }\n  }, React.createElement(Text, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 9\n    }\n  }, deckLength, \" cards\")), React.createElement(View, {\n    style: {\n      flexDirection: 'row',\n      justifyContent: \"space-between\",\n      alignItems: 'center'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 7\n    }\n  }, React.createElement(Text, {\n    onPress: function onPress() {\n      return navigation.push('DeckAllCards', {\n        editCard: editCard,\n        deleteCard: deleteCard,\n        deck: deck\n      });\n    },\n    style: styles.text,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 9\n    }\n  }, \"See all cards\"), React.createElement(TouchableOpacity, {\n    onPress: function onPress() {\n      return shareDeck(deck);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 9\n    }\n  }, React.createElement(Text, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 11\n    }\n  }, React.createElement(FontAwesome, {\n    name: \"share\",\n    style: {\n      fontSize: 20,\n      color: '#4F74FF'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 13\n    }\n  }), \"Share\"))), React.createElement(Button, {\n    title: \"Study\",\n    onPress: function onPress() {\n      return navigation.push('CardDetails', {\n        cardsToStudy: deck.cards.filter(function (card) {\n          return card.nextReview < Date.now();\n        }),\n        setNextReview: setNextReview,\n        deckTitle: deck.title\n      });\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 7\n    }\n  }), React.createElement(MaterialIcons, {\n    name: \"add\",\n    size: 24,\n    style: _objectSpread(_objectSpread({}, styles.modalToggle), styles.modalClose),\n    onPress: function onPress() {\n      return navigation.push('AddOrEditCard', {\n        addCard: addCard,\n        deckTitle: deck.title\n      });\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 7\n    }\n  }), fadeMessage && (showMessage(), React.createElement(View, {\n    style: globalStyles.fadeMessageContainer,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 11\n    }\n  }, React.createElement(Animated.View, {\n    style: _objectSpread({\n      opacity: fadeValue\n    }, globalStyles.fadeMessage),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 13\n    }\n  }, React.createElement(Text, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 15\n    }\n  }, \"Deck shared\")))));\n}\nvar styles = StyleSheet.create({\n  modalToggle: {\n    marginTop: 20,\n    marginBottom: 10,\n    borderWidth: 1,\n    borderColor: 'lightgrey',\n    padding: 10,\n    borderRadius: 30,\n    alignSelf: 'center'\n  },\n  modalClose: {\n    marginTop: 20,\n    marginBottom: 10\n  },\n  modalContent: {\n    flex: 1\n  },\n  text: {\n    marginTop: 10,\n    marginBottom: 10\n  }\n});","map":{"version":3,"sources":["C:/Juany/Escritorio Jun 2020/Programacion/React Native/Genius/Client/screens/DeckDetails.js"],"names":["React","useState","useEffect","MaterialIcons","NavigationEvents","globalStyles","Card","fetchData","FontAwesome","DeckDetails","navigation","addCard","getParam","editCard","deleteCard","setNextReview","deck","cards","length","deckLength","setDeckLength","shared","setShared","fadeMessage","setFadeMessage","fadeValue","Animated","Value","shareDeck","method","headers","body","JSON","stringify","showMessage","timing","toValue","duration","start","container","titleText","textAlign","title","flexDirection","justifyContent","alignItems","push","styles","text","fontSize","color","cardsToStudy","filter","card","nextReview","Date","now","deckTitle","modalToggle","modalClose","fadeMessageContainer","opacity","StyleSheet","create","marginTop","marginBottom","borderWidth","borderColor","padding","borderRadius","alignSelf","modalContent","flex"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { StyleSheet, View, Text, Button, Modal, TouchableWithoutFeedback, Keyboard, TouchableOpacity, Animated } from 'react-native';\r\nimport { MaterialIcons } from '@expo/vector-icons';\r\nimport { NavigationEvents } from 'react-navigation';\r\n\r\n\r\nimport { globalStyles } from '../styles/globalStyles';\r\nimport Card from '../shared/card';\r\nimport { fetchData } from '../apiClient';\r\n\r\nimport FontAwesome from 'react-native-vector-icons/FontAwesome';\r\n\r\nexport default function DeckDetails ({ navigation }) {\r\n  const addCard = navigation.getParam('addCard');\r\n  const editCard = navigation.getParam('editCard');\r\n  const deleteCard = navigation.getParam('deleteCard');\r\n  const setNextReview = navigation.getParam('setNextReview');\r\n  const deck = navigation.getParam('item');\r\n  const [deckLength, setDeckLength] = useState(deck.cards.length);\r\n  const [shared, setShared] = useState(false);\r\n  const [fadeMessage, setFadeMessage] = useState(false);\r\n\r\n  const fadeValue = new Animated.Value(1);  // 1 because starts completly visible\r\n\r\n  function shareDeck (deck) { // NO FUNCIONA BIEN NO MUESTRA BIEN EL MENSAJE DE QUE SE COMPARTIO\r\n    if (!fadeMessage) {\r\n      fetchData('decks', {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify(deck)\r\n      });\r\n      setFadeMessage(false);\r\n      setFadeMessage(true);\r\n    }\r\n  }\r\n\r\n  const showMessage = () => {\r\n    Animated.timing(fadeValue, {\r\n      toValue: 0, // 0 because after the 3000 ms it's not visible\r\n      duration: 3000\r\n    }).start();\r\n  };\r\n\r\n  return (\r\n    <View style={globalStyles.container}>\r\n      <NavigationEvents\r\n        onDidFocus={() => setDeckLength(deck.cards.length)}   //update the deckLength\r\n      />\r\n      <Text style={{ ...globalStyles.titleText, textAlign: \"center\" }}>{deck.title}</Text>\r\n      <Card>\r\n        <Text>{deckLength} cards</Text>\r\n      </Card>\r\n      <View style={{ flexDirection: 'row', justifyContent: \"space-between\", alignItems: 'center' }}>\r\n        <Text\r\n          onPress={() => navigation.push('DeckAllCards', { editCard, deleteCard, deck })}\r\n          style={styles.text}\r\n        >See all cards</Text>\r\n        <TouchableOpacity\r\n          onPress={() => shareDeck(deck)}\r\n        >\r\n          <Text>\r\n            <FontAwesome name='share' style={{ fontSize: 20, color: '#4F74FF' }} />\r\n          Share\r\n        </Text>\r\n        </TouchableOpacity>\r\n      </View>\r\n      <Button title='Study' onPress={() => navigation.push('CardDetails', { cardsToStudy: deck.cards.filter(card => card.nextReview < Date.now()), setNextReview, deckTitle: deck.title })} />\r\n      <MaterialIcons\r\n        name='add'\r\n        size={24}\r\n        style={{ ...styles.modalToggle, ...styles.modalClose }}\r\n        onPress={() => navigation.push('AddOrEditCard', { addCard, deckTitle: deck.title })}\r\n      />\r\n      {\r\n        fadeMessage &&\r\n        (\r\n          showMessage(),\r\n          <View style={globalStyles.fadeMessageContainer}>\r\n            <Animated.View\r\n              style={{\r\n                opacity: fadeValue,\r\n                ...globalStyles.fadeMessage,\r\n              }}\r\n            >\r\n              <Text>Deck shared</Text>\r\n            </Animated.View>\r\n          </View>\r\n        )\r\n      }\r\n    </View >\r\n  )\r\n}\r\n\r\n// Estos estilos se repiten en Home, son los del \"+\", puedo sinó crear un componente para los \"+\"\r\nconst styles = StyleSheet.create({\r\n  modalToggle: {\r\n    marginTop: 20,\r\n    marginBottom: 10,\r\n    borderWidth: 1,\r\n    borderColor: 'lightgrey',\r\n    padding: 10,\r\n    borderRadius: 30,\r\n    alignSelf: 'center',\r\n  },\r\n  modalClose: {\r\n    marginTop: 20,\r\n    marginBottom: 10,\r\n  },\r\n  modalContent: {\r\n    flex: 1,\r\n  },\r\n  text: {\r\n    marginTop: 10,\r\n    marginBottom: 10,\r\n  }\r\n});"]},"metadata":{},"sourceType":"module"}